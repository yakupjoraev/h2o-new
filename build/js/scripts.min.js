$((function(){$("#datepicker-10").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату",dateFormat:"dd.mm.yy"}),$("#datepicker-11").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату",dateFormat:"dd.mm.yy"}),$("#datepicker-12").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату"}),$("#datepicker-13").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату"}),$("#datepicker-14").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату"}),$("#datepicker-15").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату"}),$("#datepicker-16").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату"}),$("#datepicker-17").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату"}),$("#datepicker-18").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату"}),$("#datepicker-19").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату"}),$("#datepicker-20").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату"}),$("#datepicker-122").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату"}),$("#datepicker-133").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату"}),$("#datepicker-144").datepicker({changeMonth:!1,changeYear:!0,showOn:"button",buttonImage:"./img/icons/datepicker.svg",buttonText:"Выбрать дату"}),$.datepicker.regional.ru={closeText:"Закрыть",prevText:"Предыдущий",nextText:"Следующий",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Не",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},$.datepicker.setDefaults($.datepicker.regional.ru)}));const openModalBtns=document.querySelectorAll(".open-modal-btn"),closeModalBtns=document.querySelectorAll(".close-modal-btn"),modals=document.querySelectorAll(".modal");function filtersArchive(){if(!document.querySelector(".archive"))return null;const e=document.querySelector("[data-filters-result]"),t=document.querySelector("[data-filters-btn-1]"),a=document.querySelector("[data-filters-btn-2]");t.addEventListener("click",(()=>{e.classList.remove("view-list"),e.classList.add("view-cards"),a.classList.remove("view-list"),t.classList.add("view-cards")})),a.addEventListener("click",(()=>{e.classList.remove("view-cards"),e.classList.add("view-list"),t.classList.remove("view-cards"),a.classList.add("view-list")}))}function cardCommentTooltip(){document.querySelectorAll("[data-card-comment-text]").forEach((e=>{const t=e.querySelector("[data-card-comment-tooltip]"),a=e.querySelector(".cards__item-comments-text"),s=a.textContent;if(s.length>70){const c=s.substring(0,70)+"...";a.textContent=c,e.addEventListener("mouseover",(function(){t.textContent=s,t.style.display="block"})),e.addEventListener("mouseout",(function(){t.style.display="none"}))}}))}function historyLogs(){let e=document.querySelectorAll("[data-history-block]");if(!e)return null;e.forEach((e=>{e.querySelector("[data-history-btn]").addEventListener("click",(()=>{e.classList.toggle("active")}))}))}openModalBtns.forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.modalId;document.getElementById(t).classList.add("show")}))})),closeModalBtns.forEach((e=>{e.addEventListener("click",(()=>{e.closest(".modal").classList.remove("show")}))})),window.addEventListener("click",(e=>{e.target.classList.contains("modal")&&e.target.classList.remove("show")})),filtersArchive(),cardCommentTooltip(),historyLogs();const getTemplate=(e=[],t,a)=>{let s=t??"placeholder не указан";const c=e.map((e=>{let t="";return e.id===a&&(s=e.value,t="selected"),`\n          <li class="select__item ${t}" data-type="item" data-id="${e.id}">${e.value}</li>\n      `}));return`\n      <input type="hidden" class="hidden__input">\n      <div class="select__backdrop" data-type="backdrop"></div>\n      <div class="select__input" data-type="input">\n      <span class="cards__item-header-circkle"></span>\n          <div data-type="value" class="select__input-value">\n         \n            ${s}\n          </div>\n          <img src="./img/select-arrow.svg" alt="arrow" data-type="arrow" class="select__arrow">\n      </div>\n      <div class="select__dropdown">\n          <ul class="select__list">\n              ${c.join("")}\n          </ul>\n      </div>\n  `};class Select{constructor(e,t){this.$el=document.querySelector(e),this.options=t,this.selectedId=t.selectedId,this.render(),this.setup(),this.updateCircleColor(this.current.value)}render(){const{placeholder:e,data:t}=this.options;this.$el.classList.add("select"),this.$el.innerHTML=getTemplate(t,e,this.selectedId)}setup(){this.clickHandler=this.clickHandler.bind(this),this.$el.addEventListener("click",this.clickHandler),this.$arrow=this.$el.querySelector('[data-type="arrow"]'),this.$value=this.$el.querySelector('[data-type="value"]'),this.updateCircleColor(this.$value.textContent)}clickHandler(e){const{type:t}=e.target.dataset;if("input"===t)this.toggle();else if("item"===t){const t=e.target.dataset.id;this.select(t)}else"backdrop"===t&&this.close()}get isOpen(){return this.$el.classList.contains("open")}get current(){return this.options.data.find((e=>e.id===this.selectedId))}select(e){this.selectedId=e,this.$value.textContent=this.current.value,this.updateCircleColor(this.current.value),this.$el.querySelectorAll('[data-type="item"]').forEach((e=>e.classList.remove("selected"))),this.$el.querySelector(`[data-id="${e}"]`).classList.add("selected"),this.options.onSelect&&this.options.onSelect(this.current),this.close()}toggle(){this.isOpen?this.close():this.open()}open(){this.$el.classList.add("open"),this.$arrow.classList.add("open")}close(){this.$el.classList.remove("open"),this.$arrow.classList.remove("open")}destroy(){this.$el.removeEventListener("click",this.clickHandler),this.$el.innerHTML=""}updateCircleColor(e){const t=this.$el.querySelector(".cards__item-header-circkle");t.style.backgroundColor="Ожидание"===e?"#ff6f6f":"Ожидание оплаты"===e?"#58c0d7":"Оплачено"===e?"#79D758":"В работе"===e?"#f90":"Выполнено"===e?"#bf56ff":""}}const select=new Select("#select",{placeholder:"Выберите элемент",selectedId:"1",data:[{id:"1",value:"Ожидание"},{id:"2",value:"Ожидание оплаты"},{id:"3",value:"Оплачено"},{id:"4",value:"В работе"},{id:"5",value:"Выполнено"}],onSelect(e){document.querySelector(".hidden__input").value=e.value}}),select2=new Select("#select2",{placeholder:"Выберите элемент",selectedId:"6",data:[{id:"6",value:"Ожидание"},{id:"7",value:"Ожидание оплаты"},{id:"8",value:"Оплачено"},{id:"9",value:"В работе"},{id:"10",value:"Выполнено"}],onSelect(e){document.querySelector("#select2 .hidden__input").value=e.value}}),select3=new Select("#select3",{placeholder:"Выберите элемент",selectedId:"15",data:[{id:"11",value:"Ожидание"},{id:"12",value:"Ожидание оплаты"},{id:"13",value:"Оплачено"},{id:"14",value:"В работе"},{id:"15",value:"Выполнено"}],onSelect(e){document.querySelector("#select3 .hidden__input").value=e.value}}),select4=new Select("#select4",{placeholder:"Выберите элемент",selectedId:"15",data:[{id:"11",value:"Ожидание"},{id:"12",value:"Ожидание оплаты"},{id:"13",value:"Оплачено"},{id:"14",value:"В работе"},{id:"15",value:"Выполнено"}],onSelect(e){document.querySelector("#select3 .hidden__input").value=e.value}});select.updateCircleColor(select.current.value);